# ----------------------------------------------------------------------
# D√©sactiver l'indexation des dossiers
# ----------------------------------------------------------------------
Options -Indexes

# ----------------------------------------------------------------------
# Activation du moteur de r√©√©criture
# ----------------------------------------------------------------------
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>


<IfModule !mod_rewrite.c>
    # üîπ Si mod_rewrite n'est pas dispo, renvoyer toutes les 404 vers index.php
    ErrorDocument 404 index.php
</IfModule>

# ----------------------------------------------------------------------
# üîê S√©curisation des fichiers sensibles (d√©j√† actif en local)
# ----------------------------------------------------------------------
<FilesMatch "^(.*)\.(env|ini|log|sh|sql|bak|config|json|lock)$">
    Require all denied
</FilesMatch>

# ----------------------------------------------------------------------
# üîê Protection contre l'ex√©cution de PHP dans uploads (‚ö†Ô∏è Active seulement en ligne)
# ----------------------------------------------------------------------
# <Directory "/writable/uploads/">
#     <FilesMatch "\.php$">
#         Require all denied
#     </FilesMatch>
# </Directory>

# ----------------------------------------------------------------------
# üîê S√©curit√© HTTP (‚ö†Ô∏è √Ä activer en ligne uniquement)
# ----------------------------------------------------------------------
# <IfModule mod_headers.c>
#     Header always set X-Frame-Options "DENY"
#     Header always set X-XSS-Protection "1; mode=block"
#     Header always set X-Content-Type-Options "nosniff"
#     Header always set Referrer-Policy "strict-origin-when-cross-origin"
#     Header always set Content-Security-Policy "default-src 'self'"
# </IfModule>

# ----------------------------------------------------------------------
# üîπ D√©sactivation de la signature Apache (d√©j√† actif en local)
# ----------------------------------------------------------------------
ServerSignature Off
